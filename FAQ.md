# Часто задаваемые вопросы (FAQ)

## Установка и запуск

### Q: Как установить бота?

A: Следуйте инструкциям в файле `QUICKSTART.md`:

1. Создайте виртуальное окружение
2. Установите зависимости
3. Настройте переменные окружения
4. Запустите бота

### Q: Какая версия Python требуется?

A: Python 3.11 или выше.

### Q: Как получить токен Telegram бота?

A: Напишите боту @BotFather в Telegram и следуйте инструкциям.

### Q: Как получить токен Amvera LLM?

A: Зарегистрируйтесь на https://amvera.io/ и получите токен в личном кабинете.

### Q: Где найти ключ Context7?

A: Ключ Context7 можно получить в личном кабинете Context7.

## Использование

### Q: Как активировать режим ИИ?

A: Отправьте команду `/chatgpt` боту.

### Q: Как выйти из режима ИИ?

A: Отправьте команду `/stop` боту.

### Q: Почему бот не отвечает?

A: Проверьте:
1. Запущен ли бот
2. Правильно ли указаны токены в `.env`
3. Есть ли интернет соединение
4. Логи в файле `logs/bot.log`

### Q: Почему бот отвечает медленно?

A: Это может быть связано с:
1. Медленным интернет соединением
2. Перегруженностью API Amvera
3. Сложностью запроса

### Q: Может ли бот обрабатывать несколько пользователей одновременно?

A: Да, бот использует асинхронную архитектуру и может обрабатывать множество пользователей одновременно.

### Q: Есть ли ограничения на количество запросов?

A: Ограничения зависят от плана Amvera LLM. Проверьте документацию Amvera.

## Разработка

### Q: Как добавить новую команду?

A: 
1. Создайте новый файл в `src/bot/routers/`
2. Создайте новый роутер
3. Зарегистрируйте роутер в `src/bot/routers/__init__.py`

### Q: Как добавить новый сервис?

A:
1. Создайте новый файл в `src/bot/services/`
2. Создайте новый класс сервиса
3. Экспортируйте сервис в `src/bot/services/__init__.py`

### Q: Как запустить тесты?

A: Используйте команду `pytest`:
```bash
pytest
```

### Q: Как проверить покрытие кода?

A: Используйте команду:
```bash
pytest --cov=src
```

### Q: Как добавить логирование?

A: Используйте модуль `logging`:
```python
import logging

logger = logging.getLogger(__name__)
logger.info("Сообщение")
```

## Развертывание

### Q: Как развернуть бота на сервере?

A: Следуйте инструкциям в файле `DEPLOYMENT.md`.

### Q: Как использовать Docker?

A: Создайте Dockerfile и используйте Docker Compose для развертывания.

### Q: Как использовать systemd?

A: Создайте файл сервиса в `/etc/systemd/system/` и используйте `systemctl` для управления.

### Q: Как обновить бота на сервере?

A: 
1. Остановите бота
2. Обновите код (`git pull`)
3. Обновите зависимости (`pip install -r requirements.txt`)
4. Запустите бота

## Безопасность

### Q: Безопасно ли хранить токены в `.env`?

A: Да, если файл `.env` не закоммичен в репозиторий и имеет правильные права доступа.

### Q: Как защитить токены?

A:
1. Добавьте `.env` в `.gitignore`
2. Установите права доступа: `chmod 600 .env`
3. Используйте переменные окружения на сервере

### Q: Почему отключена проверка SSL-сертификата?

A: Это сделано для тестирования. Для продакшена необходимо включить проверку SSL-сертификата.

### Q: Как включить проверку SSL-сертификата?

A: Удалите следующие строки из `src/bot/services/amvera_llm.py`:
```python
ssl_context = ssl.create_default_context()
ssl_context.check_hostname = False
ssl_context.verify_mode = ssl.CERT_NONE
```

## Производительность

### Q: Как оптимизировать производительность?

A:
1. Используйте асинхронную архитектуру (уже реализовано)
2. Кэшируйте результаты
3. Используйте очередь сообщений
4. Масштабируйте горизонтально

### Q: Как мониторить производительность?

A:
1. Проверяйте логи
2. Используйте инструменты мониторинга (Prometheus, Grafana)
3. Проверяйте использование памяти и CPU

### Q: Как обработать большое количество запросов?

A:
1. Используйте несколько экземпляров бота
2. Используйте load balancer
3. Используйте очередь сообщений

## Ошибки и исключения

### Q: Что означает ошибка "Timeout"?

A: Запрос к API Amvera превысил 30 секунд. Это может быть связано с медленным интернет соединением или перегруженностью API.

### Q: Что означает ошибка "Unauthorized"?

A: Токен Amvera LLM неправильный или истек. Проверьте токен в файле `.env`.

### Q: Что означает ошибка "Internal Server Error"?

A: Ошибка на стороне API Amvera. Попробуйте позже.

### Q: Как обработать исключения?

A: Используйте блок `try-except`:
```python
try:
    response = await service.get_response(message)
except Exception as e:
    logger.error(f"Ошибка: {e}")
```

## Логирование

### Q: Где находятся логи?

A: Логи находятся в файле `logs/bot.log`.

### Q: Как изменить уровень логирования?

A: Отредактируйте файл `src/bot/utils/logging.py`.

### Q: Как просмотреть логи в реальном времени?

A: Используйте команду:
```bash
tail -f logs/bot.log
```

## Документация

### Q: Где найти документацию?

A: Документация находится в следующих файлах:
- `README.md` - основная документация
- `QUICKSTART.md` - быстрый старт
- `USAGE.md` - руководство по использованию
- `INTEGRATION.md` - описание интеграции
- `ARCHITECTURE.md` - архитектура проекта
- `API_REFERENCE.md` - справочник API
- `TESTING.md` - тестирование
- `DEPLOYMENT.md` - развертывание
- `FAQ.md` - этот файл

### Q: Где найти документацию Amvera LLM?

A: Документация находится по адресу:
- Swagger: https://lllm-swagger-amvera-services.amvera.io/openapi.yaml
- Документация: https://lllm-swagger-amvera-services.amvera.io/#/GPT/post_models_gpt

### Q: Где найти документацию aiogram?

A: Документация находится по адресу: https://docs.aiogram.dev/

## Поддержка

### Q: Как получить помощь?

A: Вы можете:
1. Проверить FAQ
2. Прочитать документацию
3. Проверить логи
4. Создать issue на GitHub

### Q: Как сообщить об ошибке?

A: Создайте issue на GitHub с описанием ошибки и логами.

### Q: Как предложить новую функцию?

A: Создайте issue на GitHub с описанием функции.

## Дополнительная информация

### Q: Какие технологии используются?

A:
- Python 3.11+
- aiogram 3.3.0
- aiohttp 3.9.5
- pydantic
- pytest

### Q: Какая лицензия используется?

A: Проверьте файл `LICENSE`.

### Q: Как внести вклад в проект?

A: Создайте fork репозитория, внесите изменения и создайте pull request.

### Q: Как связаться с разработчиком?

A: Проверьте файл `README.md` для контактной информации.
